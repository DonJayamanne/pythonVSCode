Refactor unit testing functionality to improve testability of individual components.
